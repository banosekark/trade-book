<div class="trade-calculator-window" #tradeCalculator>
  <form [formGroup]="tradeCalculatorForm" (ngSubmit)="OnTradeCalculatorFormSubmitted()">
    <!--header start -->
    <div class="header" [ngClass]="tradeType ? 'bg-primary' : 'bg-warn'">
      <mat-form-field class="search-field" color="primary">
        <mat-icon matPrefix>search</mat-icon>
        <input matInput formControlName="autoComplete" [matAutocomplete]="auto">
        <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn" class="autocomplete-pane">
          @for (option of filteredOptions | async; track option) {
          <mat-option [value]="option">{{option.name}}</mat-option>
          }
        </mat-autocomplete>
      </mat-form-field>
    </div>
    <!-- header end-->
    <mat-dialog-content>
      <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="start" dynamicHeight>
        <mat-tab label="Intraday">
          <mat-divider></mat-divider>
          <div class="tab-body">
            <div class="input-value">
              <div class="row">
                <mat-slide-toggle formControlName="tradeType" color="primary" hideIcon
                  (change)="onChangeTradeType($event)">{{ tradeType === true? 'Buy':'Sell'}}</mat-slide-toggle>
                <div class="col-sm-4">
                  <mat-form-field [color]="tradeType? 'primary':'warn'">
                    <mat-label>Total Capital</mat-label>
                    <input type="number" matInput placeholder="Total Price" (input)="calculateAmount()"
                      formControlName="totalCapital">
                    <mat-hint>Hint</mat-hint>
                    <mat-error>
                    </mat-error>
                  </mat-form-field>
                </div>
                <div class="col-sm-4">
                  <mat-form-field>
                    <mat-label>Strategy Name</mat-label>
                    <mat-select [(value)]="selected" formControlName="strategy">
                      <mat-option>None</mat-option>
                      <mat-option value="ftf">FTF</mat-option>
                      <mat-option value="ema20">EMA 20</mat-option>
                      <mat-option value="insideCandle">Inside Candle</mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
                <div class="col-sm-4">
                  <mat-form-field>
                    <mat-label>Choose a date</mat-label>
                    <input matInput [matDatepicker]="picker" [formControl]="tradeDate">
                    <mat-hint>MM/DD/YYYY</mat-hint>
                    <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                  </mat-form-field>
                </div>
              </div>
            </div>
            <mat-divider></mat-divider>
            <div class="input-value">
              <div class="row">
                <div class="col-sm-4">
                  <mat-form-field appearance="outline" [color]="tradeType? 'primary':'warn'">
                    <mat-label>Entry</mat-label>
                    <input type="number" matInput placeholder="Enter Price" min="0" formControlName="entry"
                      (input)="calculateAmount()">
                    <mat-hint>Hint</mat-hint>
                    <mat-error *ngIf="tradeCalculatorForm?.get('entry')?.hasError('invalid')">
                      Entry cannot be less than SL .
                    </mat-error>
                  </mat-form-field>
                </div>
                <div class="col-sm-4">
                  <mat-form-field appearance="outline" [color]="tradeType? 'primary':'warn'">
                    <mat-label>Stop Loss</mat-label>
                    <input type="number" matInput placeholder="Enter Price" formControlName="stopLoss"
                      (input)="calculateAmount()">
                    <mat-hint>Hint</mat-hint>
                    <mat-error *ngIf="tradeCalculatorForm.get('stopLoss')?.hasError('invalid')">
                      SL cannot be less than Entry.
                    </mat-error>
                  </mat-form-field>
                </div>
                <div class="col-sm-4">
                  <mat-form-field appearance="outline" [color]="tradeType? 'primary':'warn'">
                    <mat-label>{{isRiskPoint ? 'Risk Point' : 'Risk Amount'}}</mat-label>
                    <input type="number" matInput formControlName="riskPoint" *ngIf="isRiskPoint"
                      (input)="calculateAmount()">
                    <input type="number" *ngIf="!isRiskPoint" matInput formControlName="riskAmount"
                      (input)="calculateAmount()">
                    <mat-icon matSuffix (click)="toggleRiskPointIcon()">{{isRiskPoint ? 'layers' :
                      'crop_square'}}</mat-icon>
                    <mat-hint>Hint</mat-hint>
                  </mat-form-field>
                </div>
              </div>
            </div>
          </div>
          <mat-divider></mat-divider>
          <div class=" tab-body">
            <div class="result-value">
              <div class="row">
                <mat-radio-group formcontrolname="ratio" aria-label="Select an option" (change)="onChangeRatio($event)">
                  <mat-radio-button value="2" checked>2:1</mat-radio-button>
                  <mat-radio-button value="3">3:1</mat-radio-button>
                </mat-radio-group>
                <div class="col-sm-4">
                  <mat-form-field *ngIf="OptionFirstSelected" appearance="outline"
                    [color]="tradeType? 'primary':'warn'">
                    <mat-label>Target Price 2:1</mat-label>
                    <input matInput type="number" formControlName="targetPrice" (input)="calculateAmount()">
                    <mat-icon matSuffix>sentiment_very_satisfied</mat-icon>
                    <mat-hint>Hint</mat-hint>
                  </mat-form-field>
                  <mat-form-field *ngIf="!OptionFirstSelected" appearance="outline"
                    [color]="tradeType? 'primary':'warn'">
                    <mat-label>Target Price 3:1</mat-label>
                    <input matInput type="number" formControlName="targetPrice3" (input)="calculateAmount()">
                    <mat-icon matSuffix>sentiment_very_satisfied</mat-icon>
                    <mat-hint>Hint</mat-hint>
                  </mat-form-field>
                </div>
                <div class=" col-sm-4">
                  <mat-form-field *ngIf="OptionFirstSelected" appearance="outline"
                    [color]="tradeType? 'primary':'warn'">
                    <mat-label>Reward Possible 2:1</mat-label>
                    <input matInput type="number" formControlName="rewardPossible" (input)="calculateAmount()">
                    <mat-icon matSuffix>sentiment_very_satisfied</mat-icon>
                    <mat-hint>Hint</mat-hint>
                  </mat-form-field>
                  <mat-form-field *ngIf="!OptionFirstSelected" appearance="outline"
                    [color]="tradeType? 'primary':'warn'">
                    <mat-label>Reward Possible 3:1</mat-label>
                    <input matInput type="number" formControlName="rewardPossible3" (input)="calculateAmount()">
                    <mat-icon matSuffix>sentiment_very_satisfied</mat-icon>
                    <mat-hint>Hint</mat-hint>
                  </mat-form-field>
                </div>
                <div class="col-sm-4">
                  <mat-form-field appearance="outline" [color]="tradeType? 'primary':'warn'">
                    <mat-label>{{isQuantity ? 'Quantity' : 'Lot'}}</mat-label>
                    <input matInput type="number" *ngIf="isQuantity" formControlName="quantity"
                      (input)="calculateAmount()">
                    <input matInput type="number" *ngIf="!isQuantity" formControlName="lot" (input)="calculateAmount()">
                    <mat-icon matSuffix *ngIf=" isQuantity" (click)="toggleQuantityIcon()">layers</mat-icon>
                    <mat-icon matSuffix *ngIf="!isQuantity" matSuffix
                      (click)="toggleQuantityIcon()">crop_square</mat-icon>
                    <mat-hint>Hint</mat-hint>
                  </mat-form-field>
                </div>
              </div>
            </div>
          </div>
          <div class="tab-body">
            <div class="result-value">
              <div class="row">
                <div class="col-sm-4">
                  <mat-form-field appearance="outline" [color]="tradeType? 'primary':'warn'">
                    <mat-label>% Of Total Capital</mat-label>
                    <input matInput type="number" formControlName="percentageOfCapital">
                    <mat-hint>Hint</mat-hint>
                  </mat-form-field>
                </div>
                <div class="col-sm-4">
                  <mat-form-field appearance="outline" [color]="tradeType? 'primary':'warn'">
                    <mat-label>Risk Per Trade</mat-label>
                    <input matInput type="number" placeholder="Placeholder" formControlName="riskPerTrade">
                    <mat-hint>Hint</mat-hint>
                  </mat-form-field>
                </div>
                <div class="col-sm-4">
                  <mat-form-field appearance="outline" [color]="tradeType? 'primary':'warn'">
                    <mat-label>Capital Required</mat-label>
                    <input matInput type="number" formControlName="capitalRequired" (input)="calculateAmount()">
                    <mat-hint>Hint</mat-hint>
                  </mat-form-field>
                </div>
              </div>
            </div>
          </div>
        </mat-tab>
        <mat-tab label=" Second">
          <mat-divider></mat-divider>
        </mat-tab>
        <mat-tab label="Third">
          <mat-divider></mat-divider>
        </mat-tab>
        <mat-tab label="fourth">
          <mat-divider></mat-divider>
        </mat-tab>
      </mat-tab-group>
    </mat-dialog-content>
    <mat-dialog-actions align="end">
      <button mat-raised-button mat-dialog-close color="accent">Close</button>
      <button mat-raised-button extended type="submit" [color]="tradeType? 'primary':'warn'">

        Primary
      </button>
      <button mat-raised-button extended color="accent">

        Primary
      </button>
    </mat-dialog-actions>
  </form>

</div>